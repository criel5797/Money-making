<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ - ç„¡æ–™ã‚ªãƒ³ãƒ©ã‚¤ãƒ³JSONæ•´å½¢ãƒ„ãƒ¼ãƒ«</title>
    <meta name="description" content="ç„¡æ–™ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã€‚JSONãƒ‡ãƒ¼ã‚¿ã‚’å³åº§ã«æ•´å½¢ã—ã¦æ¤œè¨¼ã—ã¾ã™ã€‚ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã§JSONã‚’è¦‹ã‚„ã™ãæ•´ç†ã—ã¾ã™ã€‚">
    <meta name="keywords" content="JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼, JSONæ•´å½¢, JSONæ¤œè¨¼, JSONãƒ“ãƒ¥ãƒ¼ã‚¢, JSONå¤‰æ›">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ - ç„¡æ–™ã‚ªãƒ³ãƒ©ã‚¤ãƒ³JSONæ•´å½¢ãƒ„ãƒ¼ãƒ«">
    <meta property="og:description" content="JSONãƒ‡ãƒ¼ã‚¿ã‚’å³åº§ã«æ•´å½¢ã—ã¦æ¤œè¨¼ã—ã¾ã™ã€‚ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã§è¦‹ã‚„ã™ãã€‚">
    <meta property="og:type" content="website">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e4e4e4;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 30px 0; }
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        .subtitle { color: #888; font-size: 1.1rem; }
        .ad-banner {
            background: rgba(255,255,255,0.05);
            border: 1px dashed rgba(255,255,255,0.2);
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border-radius: 8px;
            color: #666;
        }
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        @media (max-width: 900px) {
            .main-content { grid-template-columns: 1fr; }
            h1 { font-size: 1.8rem; }
        }
        .panel {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            overflow: hidden;
        }
        .panel-header {
            background: rgba(255,255,255,0.08);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .panel-title { font-weight: 600; color: #00d9ff; }
        .panel-actions { display: flex; gap: 10px; }
        textarea {
            width: 100%;
            height: 500px;
            background: transparent;
            border: none;
            padding: 20px;
            color: #e4e4e4;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
        }
        .output-area {
            height: 500px;
            overflow: auto;
            padding: 20px;
        }
        pre {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #00d9ff, #00ff88);
            color: #1a1a2e;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 217, 255, 0.3);
        }
        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: #e4e4e4;
        }
        .btn-secondary:hover { background: rgba(255,255,255,0.2); }
        .btn-small { padding: 6px 12px; font-size: 12px; }
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .options {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .option-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .option-group label { color: #888; font-size: 14px; }
        select {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #e4e4e4;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            outline: none;
        }
        select option { background: #1a1a2e; }
        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            background: rgba(0,0,0,0.2);
            font-size: 13px;
            color: #888;
        }
        .status-valid { color: #00ff88; }
        .status-invalid { color: #ff4757; }
        .json-key { color: #00d9ff; }
        .json-string { color: #ffd93d; }
        .json-number { color: #ff6b6b; }
        .json-boolean { color: #ff6b6b; }
        .json-null { color: #888; }
        .json-bracket { color: #888; }
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 255, 136, 0.9);
            color: #1a1a2e;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
        .error-message {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid #ff4757;
            color: #ff4757;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        footer { text-align: center; padding: 40px 20px; color: #666; }
        footer a { color: #00d9ff; text-decoration: none; }
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        .feature {
            background: rgba(255,255,255,0.05);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }
        .feature-icon { font-size: 2rem; margin-bottom: 15px; }
        .feature h3 { color: #00d9ff; margin-bottom: 10px; }
        .feature p { color: #888; font-size: 14px; }
        .tree-view { padding: 10px; }
        .tree-node { margin-left: 20px; }
        .tree-key { color: #00d9ff; cursor: pointer; }
        .tree-toggle { cursor: pointer; user-select: none; margin-right: 5px; }
        .tree-value { color: #ffd93d; }
        .collapsible { display: inline; }
        .collapsed > .tree-content { display: none; }
        .lang-switch {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        .lang-switch a {
            color: #888;
            text-decoration: none;
            padding: 5px 10px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 4px;
            font-size: 0.85rem;
        }
        .lang-switch a:hover { background: rgba(255,255,255,0.1); }
    </style>
<script>window.currentLang="ja";window.toolI18n={"meta":{"title":{"ko":"JSON í¬ë§·í„°","en":"JSON Formatter","ja":"JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼"},"desc":{"ko":"JSON ì •ë ¬","en":"Format JSON","ja":"JSONæ•´å½¢"}},"header":{"title":{"ko":"JSON í¬ë§·í„°","en":"JSON Formatter","ja":"JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼"},"subtitle":{"ko":"JSON ì •ë ¬ ë„êµ¬","en":"JSON Tool","ja":"JSONãƒ„ãƒ¼ãƒ«"}},"options":{"indent":{"ko":"ë“¤ì—¬ì“°ê¸°","en":"Indent","ja":"ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ"},"view":{"ko":"ë³´ê¸°","en":"View","ja":"è¡¨ç¤º"}},"controls":{"format":{"ko":"ì •ë ¬","en":"Format","ja":"æ•´å½¢"},"minify":{"ko":"ì••ì¶•","en":"Minify","ja":"åœ§ç¸®"},"validate":{"ko":"ê²€ì¦","en":"Validate","ja":"æ¤œè¨¼"},"clear":{"ko":"ì§€ìš°ê¸°","en":"Clear","ja":"ã‚¯ãƒªã‚¢"},"sample":{"ko":"ìƒ˜í”Œ","en":"Sample","ja":"ã‚µãƒ³ãƒ—ãƒ«"}},"panel":{"input":{"ko":"ì…ë ¥","en":"Input","ja":"å…¥åŠ›"},"paste":{"ko":"ë¶™ì—¬ë„£ê¸°","en":"Paste","ja":"è²¼ä»˜"},"placeholder":{"ko":"JSON ì…ë ¥...","en":"Enter JSON...","ja":"JSONå…¥åŠ›..."},"output":{"ko":"ì¶œë ¥","en":"Output","ja":"å‡ºåŠ›"},"copy":{"ko":"ë³µì‚¬","en":"Copy","ja":"ã‚³ãƒ”ãƒ¼"},"download":{"ko":"ë‹¤ìš´ë¡œë“œ","en":"Download","ja":"DL"},"ready":{"ko":"ì¤€ë¹„ë¨","en":"Ready","ja":"æº–å‚™å®Œäº†"}},"features":{"f1":{"title":{"ko":"ì •ë ¬","en":"Format","ja":"æ•´å½¢"},"desc":{"ko":"ë³´ê¸° ì¢‹ê²Œ","en":"Pretty","ja":"ç¶ºéº—ã«"}},"f2":{"title":{"ko":"ê²€ì¦","en":"Validate","ja":"æ¤œè¨¼"},"desc":{"ko":"ì˜¤ë¥˜ í™•ì¸","en":"Check","ja":"ç¢ºèª"}},"f3":{"title":{"ko":"ê°•ì¡°","en":"Highlight","ja":"å¼·èª¿"},"desc":{"ko":"ìƒ‰ìƒ","en":"Color","ja":"è‰²"}},"f4":{"title":{"ko":"ì••ì¶•","en":"Minify","ja":"åœ§ç¸®"},"desc":{"ko":"ì‘ê²Œ","en":"Compact","ja":"å°ã•ã"}}},"footer":{"ko":"ì•ˆì „í•œ ë„êµ¬","en":"Secure Tool","ja":"å®‰å…¨ãªãƒ„ãƒ¼ãƒ«"}};</script></head>
<body>
    <div class="container">
        <header>
            <h1>JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ï¼†ãƒ“ãƒ¥ãƒ¼ã‚¢</h1>
            <p class="subtitle">JSONãƒ‡ãƒ¼ã‚¿ã‚’å³åº§ã«æ•´å½¢ã—ã¦æ¤œè¨¼</p>
        </header>

        <div class="ad-banner">åºƒå‘Š</div>

        <div class="options">
            <div class="option-group">
                <label for="indent">ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ:</label>
                <select id="indent">
                    <option value="2">2ã‚¹ãƒšãƒ¼ã‚¹</option>
                    <option value="4">4ã‚¹ãƒšãƒ¼ã‚¹</option>
                    <option value="tab">ã‚¿ãƒ–</option>
                </select>
            </div>
            <div class="option-group">
                <label for="viewMode">è¡¨ç¤º:</label>
                <select id="viewMode">
                    <option value="formatted">æ•´å½¢</option>
                    <option value="tree">ãƒ„ãƒªãƒ¼è¡¨ç¤º</option>
                    <option value="minified">åœ§ç¸®</option>
                </select>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="formatJSON()">JSONæ•´å½¢</button>
            <button class="btn btn-secondary" onclick="minifyJSON()">åœ§ç¸®</button>
            <button class="btn btn-secondary" onclick="validateJSON()">æ¤œè¨¼</button>
            <button class="btn btn-secondary" onclick="clearAll()">ã‚¯ãƒªã‚¢</button>
            <button class="btn btn-secondary" onclick="loadSample()">ã‚µãƒ³ãƒ—ãƒ«èª­è¾¼</button>
        </div>

        <div class="main-content">
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">å…¥åŠ›JSON</span>
                    <div class="panel-actions">
                        <button class="btn btn-small btn-secondary" onclick="pasteFromClipboard()">è²¼ã‚Šä»˜ã‘</button>
                    </div>
                </div>
                <textarea id="input" placeholder="ã“ã“ã«JSONã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„..."></textarea>
                <div class="status-bar">
                    <span id="inputStatus">æº–å‚™å®Œäº†</span>
                    <span id="inputSize">0ãƒã‚¤ãƒˆ</span>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">å‡ºåŠ›</span>
                    <div class="panel-actions">
                        <button class="btn btn-small btn-secondary" onclick="copyOutput()">ã‚³ãƒ”ãƒ¼</button>
                        <button class="btn btn-small btn-secondary" onclick="downloadJSON()">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                    </div>
                </div>
                <div class="output-area" id="outputArea">
                    <pre id="output"></pre>
                </div>
                <div class="status-bar">
                    <span id="outputStatus">-</span>
                    <span id="outputSize">0ãƒã‚¤ãƒˆ</span>
                </div>
            </div>
        </div>

        <div class="features">
            <div class="feature">
                <div class="feature-icon">{ }</div>
                <h3>æ•´å½¢ï¼†ç¾åŒ–</h3>
                <p>ãŠå¥½ã¿ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã§JSONã‚’ç¾ã—ãæ•´å½¢</p>
            </div>
            <div class="feature">
                <div class="feature-icon">âœ“</div>
                <h3>JSONæ¤œè¨¼</h3>
                <p>è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§JSONæ¤œè¨¼</p>
            </div>
            <div class="feature">
                <div class="feature-icon">ğŸ‘</div>
                <h3>ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ</h3>
                <p>èª­ã¿ã‚„ã™ã„ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å‡ºåŠ›</p>
            </div>
            <div class="feature">
                <div class="feature-icon">ğŸ“¦</div>
                <h3>åœ§ç¸®</h3>
                <p>ç©ºç™½ã‚’å‰Šé™¤ã—ã¦JSONåœ§ç¸®</p>
            </div>
        </div>

        <div class="ad-banner">åºƒå‘Š</div>

        <footer>
            <p>ç„¡æ–™JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ãƒ„ãƒ¼ãƒ« | ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿é€ä¿¡ãªã—</p>
        </footer>
    </div>

    <div class="toast" id="toast">...</div>

    <script>
        const input = document.getElementById('input');
        const output = document.getElementById('output');
        const outputArea = document.getElementById('outputArea');
        const indentSelect = document.getElementById('indent');
        const viewModeSelect = document.getElementById('viewMode');

        let lastValidJSON = null;

        input.addEventListener('input', debounce(() => {
            updateInputStatus();
            if (input.value.trim()) formatJSON();
        }, 300));

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => { clearTimeout(timeout); func(...args); };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function getIndent() {
            const value = indentSelect.value;
            return value === 'tab' ? '\t' : parseInt(value);
        }

        function formatJSON() {
            const text = input.value.trim();
            if (!text) {
                output.innerHTML = '';
                outputArea.innerHTML = '<pre id="output"></pre>';
                updateOutputStatus('', false);
                return;
            }

            try {
                const parsed = JSON.parse(text);
                lastValidJSON = parsed;
                const viewMode = viewModeSelect.value;

                if (viewMode === 'tree') {
                    outputArea.innerHTML = '<div class="tree-view" id="treeOutput"></div>';
                    document.getElementById('treeOutput').innerHTML = createTreeView(parsed);
                } else if (viewMode === 'minified') {
                    const minified = JSON.stringify(parsed);
                    outputArea.innerHTML = '<pre id="output"></pre>';
                    document.getElementById('output').textContent = minified;
                    updateOutputStatus(minified, true);
                } else {
                    const formatted = JSON.stringify(parsed, null, getIndent());
                    outputArea.innerHTML = '<pre id="output"></pre>';
                    document.getElementById('output').innerHTML = syntaxHighlight(formatted);
                    updateOutputStatus(formatted, true);
                }

                document.getElementById('inputStatus').textContent = 'æœ‰åŠ¹ãªJSON';
                document.getElementById('inputStatus').className = 'status-valid';

            } catch (e) {
                outputArea.innerHTML = '<pre id="output"></pre>';
                document.getElementById('output').innerHTML = `<div class="error-message">ã‚¨ãƒ©ãƒ¼: ${e.message}</div>`;
                document.getElementById('inputStatus').textContent = 'ç„¡åŠ¹ãªJSON';
                document.getElementById('inputStatus').className = 'status-invalid';
                updateOutputStatus('', false);
            }
        }

        function minifyJSON() {
            const text = input.value.trim();
            if (!text) return;

            try {
                const parsed = JSON.parse(text);
                const minified = JSON.stringify(parsed);
                outputArea.innerHTML = '<pre id="output"></pre>';
                document.getElementById('output').textContent = minified;
                updateOutputStatus(minified, true);
                showToast('JSONåœ§ç¸®å®Œäº†ï¼');
            } catch (e) {
                showToast('ç„¡åŠ¹ãªJSONï¼');
            }
        }

        function validateJSON() {
            const text = input.value.trim();
            if (!text) {
                showToast('JSONã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            try {
                JSON.parse(text);
                showToast('æœ‰åŠ¹ãªJSONã§ã™ï¼');
                document.getElementById('inputStatus').textContent = 'æœ‰åŠ¹ãªJSON';
                document.getElementById('inputStatus').className = 'status-valid';
            } catch (e) {
                showToast('ç„¡åŠ¹: ' + e.message);
                document.getElementById('inputStatus').textContent = 'ç„¡åŠ¹ãªJSON';
                document.getElementById('inputStatus').className = 'status-invalid';
            }
        }

        function syntaxHighlight(json) {
            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'json-number';
                if (/^"/.test(match)) {
                    cls = /:$/.test(match) ? 'json-key' : 'json-string';
                } else if (/true|false/.test(match)) {
                    cls = 'json-boolean';
                } else if (/null/.test(match)) {
                    cls = 'json-null';
                }
                return '<span class="' + cls + '">' + match + '</span>';
            });
        }

        function createTreeView(obj, key = null) {
            const type = Array.isArray(obj) ? 'array' : typeof obj;
            if (obj === null) return `<span class="json-null">null</span>`;

            if (type === 'object' || type === 'array') {
                const isArray = type === 'array';
                const bracket = isArray ? ['[', ']'] : ['{', '}'];
                if ((isArray ? obj.length : Object.keys(obj).length) === 0) {
                    return `<span class="json-bracket">${bracket[0]}${bracket[1]}</span>`;
                }

                let html = `<span class="collapsible">`;
                html += `<span class="tree-toggle" onclick="this.parentElement.classList.toggle('collapsed')">â–¼</span>`;
                html += `<span class="json-bracket">${bracket[0]}</span>`;
                html += `<div class="tree-content">`;

                if (isArray) {
                    obj.forEach((item, index) => {
                        html += `<div class="tree-node"><span class="json-key">${index}</span>: ${createTreeView(item)}</div>`;
                    });
                } else {
                    for (const [k, v] of Object.entries(obj)) {
                        html += `<div class="tree-node"><span class="json-key">"${k}"</span>: ${createTreeView(v)}</div>`;
                    }
                }

                html += `</div><span class="json-bracket">${bracket[1]}</span></span>`;
                return html;
            }

            if (type === 'string') return `<span class="json-string">"${escapeHtml(obj)}"</span>`;
            if (type === 'number') return `<span class="json-number">${obj}</span>`;
            if (type === 'boolean') return `<span class="json-boolean">${obj}</span>`;
            return String(obj);
        }

        function escapeHtml(str) {
            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
        }

        function updateInputStatus() {
            const text = input.value;
            const bytes = new Blob([text]).size;
            document.getElementById('inputSize').textContent = formatBytes(bytes);
        }

        function updateOutputStatus(text, valid) {
            if (text) {
                const bytes = new Blob([text]).size;
                document.getElementById('outputSize').textContent = formatBytes(bytes);
                document.getElementById('outputStatus').textContent = valid ? 'æ•´å½¢æ¸ˆã¿' : 'ã‚¨ãƒ©ãƒ¼';
                document.getElementById('outputStatus').className = valid ? 'status-valid' : 'status-invalid';
            } else {
                document.getElementById('outputSize').textContent = '0ãƒã‚¤ãƒˆ';
                document.getElementById('outputStatus').textContent = '-';
                document.getElementById('outputStatus').className = '';
            }
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0ãƒã‚¤ãƒˆ';
            const k = 1024;
            const sizes = ['ãƒã‚¤ãƒˆ', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function copyOutput() {
            let text;
            const treeOutput = document.getElementById('treeOutput');
            if (treeOutput) {
                text = JSON.stringify(lastValidJSON, null, getIndent());
            } else {
                text = document.getElementById('output').textContent;
            }
            if (!text) { showToast('ã‚³ãƒ”ãƒ¼ã™ã‚‹å†…å®¹ãŒã‚ã‚Šã¾ã›ã‚“'); return; }
            navigator.clipboard.writeText(text).then(() => showToast('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'));
        }

        function downloadJSON() {
            let text;
            const treeOutput = document.getElementById('treeOutput');
            if (treeOutput) {
                text = JSON.stringify(lastValidJSON, null, getIndent());
            } else {
                text = document.getElementById('output').textContent;
            }
            if (!text) { showToast('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å†…å®¹ãŒã‚ã‚Šã¾ã›ã‚“'); return; }

            const blob = new Blob([text], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'formatted.json';
            a.click();
            URL.revokeObjectURL(url);
            showToast('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†ï¼');
        }

        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                input.value = text;
                updateInputStatus();
                formatJSON();
                showToast('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰è²¼ã‚Šä»˜ã‘ã¾ã—ãŸï¼');
            } catch (e) {
                showToast('è²¼ã‚Šä»˜ã‘ã«å¤±æ•—ã—ã¾ã—ãŸ');
            }
        }

        function clearAll() {
            input.value = '';
            outputArea.innerHTML = '<pre id="output"></pre>';
            document.getElementById('inputStatus').textContent = 'æº–å‚™å®Œäº†';
            document.getElementById('inputStatus').className = '';
            updateInputStatus();
            updateOutputStatus('', false);
            lastValidJSON = null;
        }

        function loadSample() {
            const sample = {
                "åå‰": "JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼",
                "ãƒãƒ¼ã‚¸ãƒ§ãƒ³": "1.0.0",
                "æ©Ÿèƒ½": ["æ•´å½¢", "æ¤œè¨¼", "åœ§ç¸®", "ãƒ„ãƒªãƒ¼è¡¨ç¤º"],
                "è¨­å®š": { "ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ": 2, "ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ": true },
                "çµ±è¨ˆ": { "ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°": 10000, "è©•ä¾¡": 4.9 },
                "æœ‰åŠ¹": true
            };
            input.value = JSON.stringify(sample);
            updateInputStatus();
            formatJSON();
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        viewModeSelect.addEventListener('change', formatJSON);
        indentSelect.addEventListener('change', formatJSON);
    </script>
<script src="/common/share-modal.js"></script><script src="/common/tool-i18n-handler.js"></script></body>
</html>
