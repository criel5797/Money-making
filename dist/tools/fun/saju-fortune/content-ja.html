<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå››æŸ±æ¨å‘½ - ç„¡æ–™å››æŸ±å…«å­—é‹å‹¢ | ç”Ÿå¹´æœˆæ—¥é‹å‹¢</title>
    <meta name="description" content="ç„¡æ–™AIå››æŸ±æ¨å‘½ï¼ç”Ÿå¹´æœˆæ—¥æ™‚ã§èª¿ã¹ã‚‹ã‚ãªãŸã®å››æŸ±å…«å­—ã€‚æ€§æ ¼ã€è²¡é‹ã€æ‹æ„›é‹ã€è·æ¥­é‹ã¾ã§è©³ã—ã„å››æŸ±åˆ†æã‚’æä¾›ã—ã¾ã™ã€‚">
    <meta name="keywords" content="å››æŸ±æ¨å‘½,å››æŸ±å…«å­—,ç„¡æ–™å››æŸ±æ¨å‘½,ç”Ÿå¹´æœˆæ—¥é‹å‹¢,ä»Šæ—¥ã®é‹å‹¢,å››æŸ±æ¨å‘½å ã„">
    <meta name="robots" content="index, follow">

    <meta property="og:title" content="AIå››æŸ±æ¨å‘½ - ç„¡æ–™å››æŸ±å…«å­—é‹å‹¢">
    <meta property="og:description" content="ç”Ÿå¹´æœˆæ—¥ã§èª¿ã¹ã‚‹ç§ã®å››æŸ±å…«å­—ï¼">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/1a1a2e/ffd700?text=AI+å››æŸ±æ¨å‘½">

    <style>
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, #ffd700, #c44dff);
            color: #1a1a2e;
            padding: 14px 28px;
            border-radius: 30px;
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
        }
        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 50%, #0f0f1a 100%);
            min-height: 100vh;
            color: #e4e4e4;
        }

        .mystic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(120, 0, 255, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            padding: 40px 0;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #ffd700, #ff6b6b, #c44dff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }

        .subtitle {
            color: #888;
            font-size: 1.1rem;
        }

        .ad-banner {
            background: rgba(255,255,255,0.05);
            border: 1px dashed rgba(255,255,255,0.2);
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border-radius: 12px;
            color: #555;
        }

        .disclaimer {
            background: rgba(255,215,0,0.1);
            border: 1px solid rgba(255,215,0,0.3);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-size: 13px;
            color: #ffd700;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 20px;
        }

        .input-section h2 {
            color: #ffd700;
            margin-bottom: 25px;
            text-align: center;
        }

        .form-grid {
            display: grid;
            gap: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            color: #aaa;
            font-size: 14px;
        }

        select, input {
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 14px;
            color: #e4e4e4;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s;
        }

        select:focus, input:focus {
            border-color: #ffd700;
        }

        select option {
            background: #1a1a2e;
        }

        .gender-options {
            display: flex;
            gap: 15px;
        }

        .gender-option {
            flex: 1;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .gender-option:hover {
            border-color: rgba(255, 215, 0, 0.3);
        }

        .gender-option.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
        }

        .gender-option span {
            font-size: 24px;
            display: block;
            margin-bottom: 5px;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #ffd700, #ff9500);
            color: #1a1a2e;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 60px 20px;
        }

        .loading.show {
            display: block;
        }

        .bagua {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .result-section {
            display: none;
        }

        .result-section.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .saju-chart {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }

        .saju-pillar {
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(196,77,255,0.1));
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }

        .pillar-title {
            font-size: 12px;
            color: #888;
            margin-bottom: 10px;
        }

        .pillar-char {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .pillar-char.chun {
            color: #ffd700;
        }

        .pillar-char.ji {
            color: #c44dff;
        }

        .pillar-element {
            font-size: 11px;
            color: #aaa;
        }

        .analysis-section {
            margin-bottom: 25px;
        }

        .analysis-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #ffd700;
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,215,0,0.2);
        }

        .analysis-content {
            color: #ccc;
            line-height: 1.9;
            font-size: 15px;
        }

        .fortune-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .fortune-item {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .fortune-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .fortune-name {
            font-size: 13px;
            color: #888;
            margin-bottom: 8px;
        }

        .fortune-score {
            font-size: 24px;
            font-weight: 700;
            color: #ffd700;
        }

        .fortune-bar {
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            margin-top: 10px;
            overflow: hidden;
        }

        .fortune-fill {
            height: 100%;
            background: linear-gradient(135deg, #ffd700, #ff9500);
            border-radius: 2px;
            transition: width 1s ease;
        }

        .element-section {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .element-item {
            text-align: center;
            padding: 15px 10px;
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .element-item:hover {
            transform: translateY(-3px);
        }

        .element-item.wood { background: rgba(0, 200, 83, 0.2); color: #00c853; }
        .element-item.fire { background: rgba(255, 82, 82, 0.2); color: #ff5252; }
        .element-item.earth { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .element-item.metal { background: rgba(255, 255, 255, 0.2); color: #fff; }
        .element-item.water { background: rgba(33, 150, 243, 0.2); color: #2196f3; }

        .element-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .element-count {
            font-size: 12px;
            opacity: 0.8;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 30px;
        }

        .share-btn {
            padding: 14px 28px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s;
            border: none;
        }

        .share-btn.primary {
            background: linear-gradient(135deg, #ffd700, #ff9500);
            color: #1a1a2e;
        }

        .share-btn.secondary {
            background: rgba(255,255,255,0.1);
            color: #e4e4e4;
        }

        .share-btn:hover {
            transform: translateY(-2px);
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: #555;
            font-size: 13px;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .card { padding: 25px; }
            .saju-chart { grid-template-columns: repeat(2, 1fr); }
            .element-section { grid-template-columns: repeat(3, 1fr); }
        }
    </style>
<script>window.currentLang="ja";window.toolI18n={"meta":{"title":{"ko":"ì‚¬ì£¼ í’€ì´","en":"Saju Fortune","ja":"å››æŸ±æ¨å‘½"},"desc":{"ko":"ìƒë…„ì›”ì¼ ì‚¬ì£¼íŒ”ì","en":"Birth Date Fortune","ja":"ç”Ÿå¹´æœˆæ—¥é‹å‹¢"}},"header":{"title":{"ko":"ì‚¬ì£¼ í’€ì´","en":"Saju Fortune","ja":"å››æŸ±æ¨å‘½"},"subtitle":{"ko":"ìƒë…„ì›”ì¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì˜ ìš´ëª…","en":"Your destiny through birth date","ja":"ç”Ÿå¹´æœˆæ—¥ã§çŸ¥ã‚‹ç§ã®é‹å‘½"}},"input":{"birthDate":{"ko":"ìƒë…„ì›”ì¼","en":"Birth Date","ja":"ç”Ÿå¹´æœˆæ—¥"},"birthTime":{"ko":"íƒœì–´ë‚œ ì‹œê°„","en":"Birth Time","ja":"ç”Ÿã¾ã‚ŒãŸæ™‚é–“"},"gender":{"ko":"ì„±ë³„","en":"Gender","ja":"æ€§åˆ¥"},"male":{"ko":"ë‚¨ì„±","en":"Male","ja":"ç”·æ€§"},"female":{"ko":"ì—¬ì„±","en":"Female","ja":"å¥³æ€§"}},"buttons":{"analyze":{"ko":"ğŸ”® ì‚¬ì£¼ ë¶„ì„í•˜ê¸°","en":"ğŸ”® Analyze Fortune","ja":"ğŸ”® å››æŸ±åˆ†æ"},"share":{"ko":"ê³µìœ í•˜ê¸°","en":"Share","ja":"å…±æœ‰"},"retry":{"ko":"ë‹¤ì‹œ í•˜ê¸°","en":"Try Again","ja":"ã‚‚ã†ä¸€åº¦"}},"result":{"personality":{"ko":"ì„±ê²©","en":"Personality","ja":"æ€§æ ¼"},"career":{"ko":"ì§ì—…ìš´","en":"Career","ja":"ä»•äº‹é‹"},"love":{"ko":"ì—°ì• ìš´","en":"Love","ja":"æ‹æ„›é‹"},"money":{"ko":"ì¬ë¬¼ìš´","en":"Money","ja":"é‡‘é‹"},"health":{"ko":"ê±´ê°•ìš´","en":"Health","ja":"å¥åº·é‹"},"advice":{"ko":"ì¡°ì–¸","en":"Advice","ja":"ã‚¢ãƒ‰ãƒã‚¤ã‚¹"}},"disclaimer":{"ko":"ì°¸ê³ ìš©ì…ë‹ˆë‹¤.","en":"For reference only.","ja":"å‚è€ƒç”¨ã§ã™ã€‚"}};</script></head>
<body>
    <div class="mystic-bg"></div>
    <div class="toast" id="toast"></div>

    <div class="container">
        <header>
            <h1>AIå››æŸ±æ¨å‘½</h1>
            <p class="subtitle">ç”Ÿå¹´æœˆæ—¥æ™‚ã§èª¿ã¹ã‚‹ã‚ãªãŸã®é‹å‘½</p>
        </header>

        <div class="ad-banner">Advertisement</div>

        <div class="disclaimer">
            ãŠéŠã³ã§æ¥½ã—ã‚€å››æŸ±æ¨å‘½ã§ã™ã€‚é‡è¦ãªæ±ºå®šã®æ ¹æ‹ ã«ã—ãªã„ã§ãã ã•ã„ã€‚
        </div>

        <div class="card" id="inputSection">
            <div class="input-section">
                <h2>ç”Ÿå¹´æœˆæ—¥æ™‚ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h2>

                <div class="form-grid">
                    <div class="form-group">
                        <label>æ€§åˆ¥</label>
                        <div class="gender-options">
                            <div class="gender-option selected" onclick="selectGender('male', this)">
                                <span>&#9794;</span>
                                ç”·æ€§
                            </div>
                            <div class="gender-option" onclick="selectGender('female', this)">
                                <span>&#9792;</span>
                                å¥³æ€§
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>æš¦</label>
                            <select id="calendarType">
                                <option value="solar">å¤ªé™½æš¦</option>
                                <option value="lunar">å¤ªé™°æš¦</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>ç”Ÿã¾ã‚Œå¹´</label>
                            <select id="year"></select>
                        </div>
                        <div class="form-group">
                            <label>æœˆ</label>
                            <select id="month"></select>
                        </div>
                        <div class="form-group">
                            <label>æ—¥</label>
                            <select id="day"></select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>ç”Ÿã¾ã‚ŒãŸæ™‚é–“</label>
                            <select id="hour">
                                <option value="-1">ä¸æ˜</option>
                                <option value="0">å­æ™‚ (23:30-01:30)</option>
                                <option value="1">ä¸‘æ™‚ (01:30-03:30)</option>
                                <option value="2">å¯…æ™‚ (03:30-05:30)</option>
                                <option value="3">å¯æ™‚ (05:30-07:30)</option>
                                <option value="4">è¾°æ™‚ (07:30-09:30)</option>
                                <option value="5">å·³æ™‚ (09:30-11:30)</option>
                                <option value="6">åˆæ™‚ (11:30-13:30)</option>
                                <option value="7">æœªæ™‚ (13:30-15:30)</option>
                                <option value="8">ç”³æ™‚ (15:30-17:30)</option>
                                <option value="9">é…‰æ™‚ (17:30-19:30)</option>
                                <option value="10">æˆŒæ™‚ (19:30-21:30)</option>
                                <option value="11">äº¥æ™‚ (21:30-23:30)</option>
                            </select>
                        </div>
                    </div>

                    <button class="submit-btn" onclick="analyzeSaju()">
                        å››æŸ±æ¨å‘½ã‚’è¦‹ã‚‹
                    </button>
                </div>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="bagua">â˜¯</div>
            <p style="color:#ffd700;">å››æŸ±å…«å­—ã‚’åˆ†æã—ã¦ã„ã¾ã™...</p>
        </div>

        <div class="result-section" id="resultSection">
            <div class="card">
                <h2 style="color:#ffd700; text-align:center; margin-bottom:25px;">ã‚ãªãŸã®å››æŸ±å…«å­—</h2>

                <div class="saju-chart" id="sajuChart"></div>

                <div class="element-section" id="elementSection"></div>
            </div>

            <div class="card">
                <div class="fortune-grid" id="fortuneGrid"></div>
            </div>

            <div class="card">
                <div id="analysisContent"></div>
            </div>

            <div class="share-buttons">
                <button class="share-btn primary" onclick="shareResult()">çµæœã‚’ã‚·ã‚§ã‚¢</button>
                <button class="share-btn secondary" onclick="retryAnalysis()">ã‚„ã‚Šç›´ã™</button>
            </div>
        </div>

        <div class="ad-banner">Advertisement</div>

        <footer>
            <p>ã“ã®å››æŸ±æ¨å‘½ã¯ãŠéŠã³ã§ã™ã€‚<br>é‡è¦ãªæ±ºå®šã¯å°‚é–€å®¶ã¨ã”ç›¸è«‡ãã ã•ã„ã€‚</p>
        </footer>
    </div>

    <script>
        // å¤©å¹²
        const heavenlyStems = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
        const stemElements = ['æœ¨', 'æœ¨', 'ç«', 'ç«', 'åœŸ', 'åœŸ', 'é‡‘', 'é‡‘', 'æ°´', 'æ°´'];

        // åœ°æ”¯
        const earthlyBranches = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
        const branchElements = ['æ°´', 'åœŸ', 'æœ¨', 'æœ¨', 'åœŸ', 'ç«', 'ç«', 'åœŸ', 'é‡‘', 'é‡‘', 'åœŸ', 'æ°´'];

        // äº”è¡Œ
        const elements = { 'æœ¨': 'wood', 'ç«': 'fire', 'åœŸ': 'earth', 'é‡‘': 'metal', 'æ°´': 'water' };
        const elementNames = { 'wood': 'æœ¨', 'fire': 'ç«', 'earth': 'åœŸ', 'metal': 'é‡‘', 'water': 'æ°´' };

        let selectedGender = 'male';
        let resultData = {};

        // åˆæœŸåŒ–
        function init() {
            const yearSelect = document.getElementById('year');
            const currentYear = new Date().getFullYear();
            for (let y = currentYear; y >= 1940; y--) {
                yearSelect.innerHTML += `<option value="${y}">${y}å¹´</option>`;
            }

            const monthSelect = document.getElementById('month');
            for (let m = 1; m <= 12; m++) {
                monthSelect.innerHTML += `<option value="${m}">${m}æœˆ</option>`;
            }

            const daySelect = document.getElementById('day');
            for (let d = 1; d <= 31; d++) {
                daySelect.innerHTML += `<option value="${d}">${d}æ—¥</option>`;
            }
        }
        init();

        function selectGender(gender, element) {
            selectedGender = gender;
            document.querySelectorAll('.gender-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
        }

        function calculateSaju(year, month, day, hour) {
            // å¹´æŸ±è¨ˆç®—
            const yearStemIdx = (year - 4) % 10;
            const yearBranchIdx = (year - 4) % 12;

            // æœˆæŸ±è¨ˆç®—ï¼ˆç°¡ç•¥åŒ–ï¼‰
            const monthStemIdx = ((year - 4) % 5 * 2 + month + 1) % 10;
            const monthBranchIdx = (month + 1) % 12;

            // æ—¥æŸ±è¨ˆç®—ï¼ˆç°¡ç•¥åŒ– - å®Ÿéš›ã«ã¯ä¸‡å¹´æš¦ãŒå¿…è¦ï¼‰
            const dayOffset = Math.floor((year - 1900) * 365.25 + (month - 1) * 30.44 + day);
            const dayStemIdx = dayOffset % 10;
            const dayBranchIdx = dayOffset % 12;

            // æ™‚æŸ±è¨ˆç®—
            let hourStemIdx = 0;
            let hourBranchIdx = 0;
            if (hour >= 0) {
                hourBranchIdx = hour;
                hourStemIdx = (dayStemIdx % 5 * 2 + hour) % 10;
            }

            return {
                year: { stem: yearStemIdx, branch: yearBranchIdx },
                month: { stem: monthStemIdx, branch: monthBranchIdx },
                day: { stem: dayStemIdx, branch: dayBranchIdx },
                hour: hour >= 0 ? { stem: hourStemIdx, branch: hourBranchIdx } : null
            };
        }

        function analyzeSaju() {
            const year = parseInt(document.getElementById('year').value);
            const month = parseInt(document.getElementById('month').value);
            const day = parseInt(document.getElementById('day').value);
            const hour = parseInt(document.getElementById('hour').value);

            if (!year || !month || !day) {
                showToast('âš ï¸ ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            document.getElementById('inputSection').style.display = 'none';
            document.getElementById('loading').classList.add('show');

            setTimeout(() => {
                const saju = calculateSaju(year, month, day, hour);
                resultData = generateAnalysis(saju, selectedGender);
                displayResult(saju);
            }, 2500);
        }

        function generateAnalysis(saju, gender) {
            // äº”è¡Œåˆ†å¸ƒè¨ˆç®—
            const elementCount = { 'æœ¨': 0, 'ç«': 0, 'åœŸ': 0, 'é‡‘': 0, 'æ°´': 0 };

            const pillars = ['year', 'month', 'day'];
            if (saju.hour) pillars.push('hour');

            pillars.forEach(pillar => {
                elementCount[stemElements[saju[pillar].stem]]++;
                elementCount[branchElements[saju[pillar].branch]]++;
            });

            // æ—¥å¹²ï¼ˆæ—¥æŸ±å¤©å¹²ï¼‰åŸºæº–åˆ†æ
            const dayMaster = stemElements[saju.day.stem];

            // é‹å‹¢ã‚¹ã‚³ã‚¢ç”Ÿæˆ
            const fortunes = {
                overall: 60 + Math.floor(Math.random() * 35),
                love: 50 + Math.floor(Math.random() * 45),
                wealth: 55 + Math.floor(Math.random() * 40),
                career: 55 + Math.floor(Math.random() * 40),
                health: 60 + Math.floor(Math.random() * 35)
            };

            return { elementCount, dayMaster, fortunes, gender };
        }

        function displayResult(saju) {
            document.getElementById('loading').classList.remove('show');
            document.getElementById('resultSection').classList.add('show');

            // å››æŸ±ãƒãƒ£ãƒ¼ãƒˆ
            const chartHtml = `
                <div class="saju-pillar">
                    <div class="pillar-title">å¹´æŸ±</div>
                    <div class="pillar-char chun">${heavenlyStems[saju.year.stem]}</div>
                    <div class="pillar-char ji">${earthlyBranches[saju.year.branch]}</div>
                    <div class="pillar-element">${stemElements[saju.year.stem]} / ${branchElements[saju.year.branch]}</div>
                </div>
                <div class="saju-pillar">
                    <div class="pillar-title">æœˆæŸ±</div>
                    <div class="pillar-char chun">${heavenlyStems[saju.month.stem]}</div>
                    <div class="pillar-char ji">${earthlyBranches[saju.month.branch]}</div>
                    <div class="pillar-element">${stemElements[saju.month.stem]} / ${branchElements[saju.month.branch]}</div>
                </div>
                <div class="saju-pillar">
                    <div class="pillar-title">æ—¥æŸ±</div>
                    <div class="pillar-char chun">${heavenlyStems[saju.day.stem]}</div>
                    <div class="pillar-char ji">${earthlyBranches[saju.day.branch]}</div>
                    <div class="pillar-element">${stemElements[saju.day.stem]} / ${branchElements[saju.day.branch]}</div>
                </div>
                ${saju.hour ? `
                <div class="saju-pillar">
                    <div class="pillar-title">æ™‚æŸ±</div>
                    <div class="pillar-char chun">${heavenlyStems[saju.hour.stem]}</div>
                    <div class="pillar-char ji">${earthlyBranches[saju.hour.branch]}</div>
                    <div class="pillar-element">${stemElements[saju.hour.stem]} / ${branchElements[saju.hour.branch]}</div>
                </div>
                ` : `
                <div class="saju-pillar" style="opacity:0.5">
                    <div class="pillar-title">æ™‚æŸ±</div>
                    <div class="pillar-char">?</div>
                    <div class="pillar-char">?</div>
                    <div class="pillar-element">æ™‚é–“æœªå…¥åŠ›</div>
                </div>
                `}
            `;
            document.getElementById('sajuChart').innerHTML = chartHtml;

            // äº”è¡Œåˆ†å¸ƒ
            let elementHtml = '';
            for (const [elem, cls] of Object.entries(elements)) {
                elementHtml += `
                    <div class="element-item ${cls}">
                        <div class="element-name">${elem}</div>
                        <div class="element-count">${resultData.elementCount[elem]}å€‹</div>
                    </div>
                `;
            }
            document.getElementById('elementSection').innerHTML = elementHtml;

            // é‹å‹¢ã‚°ãƒªãƒƒãƒ‰
            const fortuneIcons = {
                overall: 'â­', love: 'ğŸ’•', wealth: 'ğŸ’°', career: 'ğŸ’¼', health: 'â¤ï¸'
            };
            const fortuneNames = {
                overall: 'ç·åˆé‹', love: 'æ‹æ„›é‹', wealth: 'è²¡é‹', career: 'è·æ¥­é‹', health: 'å¥åº·é‹'
            };

            let fortuneHtml = '';
            for (const [key, score] of Object.entries(resultData.fortunes)) {
                fortuneHtml += `
                    <div class="fortune-item">
                        <div class="fortune-icon">${fortuneIcons[key]}</div>
                        <div class="fortune-name">${fortuneNames[key]}</div>
                        <div class="fortune-score">${score}ç‚¹</div>
                        <div class="fortune-bar">
                            <div class="fortune-fill" style="width:${score}%"></div>
                        </div>
                    </div>
                `;
            }
            document.getElementById('fortuneGrid').innerHTML = fortuneHtml;

            // è©³ç´°åˆ†æ
            document.getElementById('analysisContent').innerHTML = generateDetailedAnalysis();
        }

        function generateDetailedAnalysis() {
            const analyses = {
                personality: {
                    title: 'æ€§æ ¼åˆ†æ',
                    icon: 'ğŸ‘¤',
                    texts: [
                        'ã‚ãªãŸã¯æ·±ã„å†…é¢ã®ä¸–ç•Œã‚’æŒã¤äººã§ã™ã€‚è¡¨é¢ã¯è½ã¡ç€ã„ã¦è¦‹ãˆã¾ã™ãŒã€å†…é¢ã«ã¯ç†±ã„æƒ…ç†±ã‚’ç§˜ã‚ã¦ã„ã¾ã™ã€‚ä»–äººã®æ„Ÿæƒ…ã‚’ã‚ˆãç†è§£ã—ã€å…±æ„Ÿèƒ½åŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚',
                        'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨æ¨é€²åŠ›ãŒå¼·ã„æ–¹ã§ã™ã€‚ç›®æ¨™ã‚’å®šã‚ã‚‹ã¨æœ€å¾Œã¾ã§ã‚„ã‚Šé‚ã’ã‚‹åŸ·å¿µãŒã‚ã‚Šã€å›°é›£ãªçŠ¶æ³ã§ã‚‚è«¦ã‚ãªã„å¼·ã•ã‚’æŒã£ã¦ã„ã¾ã™ã€‚',
                        'å‰µé€ çš„ã§ç‹¬å‰µçš„ãªæ€è€ƒæ–¹å¼ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ä»–äººã¨ã¯é•ã†è¦–ç‚¹ã§ä¸–ç•Œã‚’è¦‹ã¦ã€æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’æ€ã„ã¤ãã“ã¨ãŒå¥½ãã§ã™ã€‚'
                    ]
                },
                love: {
                    title: 'æ‹æ„›é‹',
                    icon: 'ğŸ’•',
                    texts: [
                        'æ„›ã«ãŠã„ã¦çœŸå‰£ã§çŒ®èº«çš„ãªã‚¿ã‚¤ãƒ—ã§ã™ã€‚ä¸€åº¦å¿ƒã‚’ä¸ãˆã‚‹ã¨ç°¡å˜ã«å¤‰ã‚ã‚‰ãšã€ç›¸æ‰‹ã®ãŸã‚ã«å¤šãã®ã“ã¨ã‚’çŠ ç‰²ã«ã™ã‚‹æº–å‚™ãŒã§ãã¦ã„ã¾ã™ã€‚',
                        'æ‹æ„›åˆæœŸã¯æ…é‡ã§ã™ãŒã€é–¢ä¿‚ãŒæ·±ã¾ã‚‹ã»ã©æ·±ã„æ„›æƒ…ã‚’è¡¨ç¾ã—ã¾ã™ã€‚å®‰å®šçš„ã§ä¿¡é ¼ã§ãã‚‹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ãªã‚Œã¾ã™ã€‚',
                        'æ„Ÿæƒ…è¡¨ç¾ãŒè‹¦æ‰‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€è¡Œå‹•ã§æ„›ã‚’ç¤ºã™ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ç›¸æ‰‹ã®ç´°ã‹ã„ã¨ã“ã‚ã¾ã§æ°—ã‚’é…ã‚‹å„ªã—ã•ãŒã‚ã‚Šã¾ã™ã€‚'
                    ]
                },
                career: {
                    title: 'è·æ¥­é‹',
                    icon: 'ğŸ’¼',
                    texts: [
                        'å°‚é–€æ€§ã‚’æ´»ã‹ã›ã‚‹åˆ†é‡ã§é ­è§’ã‚’ç¾ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ç€å®ŸãªåŠªåŠ›ã§åˆ†é‡ã®å°‚é–€å®¶ã«ãªã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚',
                        'çµ„ç¹”å†…ã§é‡è¦ãªå½¹å‰²ã‚’æ‹…ã†ã“ã¨ã«ãªã‚‹é‹ã§ã™ã€‚ä¿¡é ¼ã‚’åŸºç›¤ã«ã¾ã™ã¾ã™å¤§ããªè²¬ä»»ã‚’ä»»ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚',
                        'èµ·æ¥­ã‚„è‡ªå–¶æ¥­ã«ã‚‚é©æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç‹¬ç«‹ã—ã¦åƒãæ™‚ã€ã‚ˆã‚Šå¤§ããªæˆæœã‚’å‡ºã›ã‚‹æ°—ãŒã‚ã‚Šã¾ã™ã€‚'
                    ]
                },
                wealth: {
                    title: 'è²¡é‹',
                    icon: 'ğŸ’°',
                    texts: [
                        'å®‰å®šçš„ãªè²¡ç”£è“„ç©ãŒå¯èƒ½ãªå››æŸ±ã§ã™ã€‚å¤§ããªå¹¸é‹ã‚ˆã‚Šã¯ç€å®ŸãªåŠªåŠ›ã§è²¡ç”£ã‚’è²¯ã‚ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚',
                        'æŠ•è³‡ã«ãŠã„ã¦ã¯æ…é‡ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒå¿…è¦ã§ã™ã€‚å®‰å…¨ãªæŠ•è³‡æ–¹å¼ãŒã‚ãªãŸã«ã‚‚ã£ã¨åˆã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚',
                        'ä¸­å¹´ä»¥é™ã«è²¡é‹ãŒä¸Šæ˜‡ã™ã‚‹æµã‚Œã§ã™ã€‚è‹¥ã„æ™‚ã«ç©ã‚“ã çµŒé¨“ã¨äººè„ˆãŒå¾Œã§å¤§ããªåŠ©ã‘ã«ãªã‚Šã¾ã™ã€‚'
                    ]
                },
                advice: {
                    title: 'ã‚¢ãƒ‰ãƒã‚¤ã‚¹',
                    icon: 'ğŸ’¡',
                    texts: [
                        'æ™‚ã«ã¯ä»–äººã®æ„è¦‹ã«ã‚‚è€³ã‚’å‚¾ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚é ‘å›ºã•ã‚’æ¨ã¦ã¦æŸ”è»Ÿã«å¯¾å¿œã™ã‚Œã°ã‚ˆã‚Šè‰¯ã„çµæœã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚',
                        'å¥åº·ç®¡ç†ã«æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚ç‰¹ã«ã‚¹ãƒˆãƒ¬ã‚¹ç®¡ç†ãŒé‡è¦ã§ã™ã€‚è¦å‰‡çš„ãªé‹å‹•ã¨ååˆ†ãªä¼‘æ¯ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚',
                        'äººé–“é–¢ä¿‚ã‚’ãŠã‚ãã‹ã«ã—ãªã„ã§ãã ã•ã„ã€‚è‰¯ã„ã”ç¸ãŒã‚ãªãŸã®é‹ã‚’å¤§ããå¤‰ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚'
                    ]
                }
            };

            let html = '';
            for (const [key, data] of Object.entries(analyses)) {
                const randomText = data.texts[Math.floor(Math.random() * data.texts.length)];
                html += `
                    <div class="analysis-section">
                        <div class="analysis-title">
                            <span>${data.icon}</span>
                            <span>${data.title}</span>
                        </div>
                        <div class="analysis-content">${randomText}</div>
                    </div>
                `;
            }
            return html;
        }

        function shareResult() {
            const text = `ğŸ”® AIå››æŸ±æ¨å‘½çµæœ

ç·åˆé‹: ${resultData.fortunes.overall}ç‚¹ â­
æ‹æ„›é‹: ${resultData.fortunes.love}ç‚¹ ğŸ’•
è²¡é‹: ${resultData.fortunes.wealth}ç‚¹ ğŸ’°
è·æ¥­é‹: ${resultData.fortunes.career}ç‚¹ ğŸ’¼
å¥åº·é‹: ${resultData.fortunes.health}ç‚¹ â¤ï¸

å››æŸ±å…«å­—ã§è¦‹ãŸç§ã®é‹å‘½!
âœ¨ ã‚ãªãŸã‚‚å››æŸ±æ¨å‘½ã‚’å—ã‘ã¦ã¿ã¾ã›ã‚“ã‹?`;

            window.shareWithModal('AIå››æŸ±æ¨å‘½', text);
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2500);
        }

        function retryAnalysis() {
            document.getElementById('resultSection').classList.remove('show');
            document.getElementById('inputSection').style.display = 'block';
        }
    </script>
<script src="/common/share-modal.js"></script><script src="/common/tool-i18n-handler.js"></script></body>
</html>
