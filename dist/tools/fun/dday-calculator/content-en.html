<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D-day Calculator</title>
    <style>
        /* Styles remain the same */
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#0f0c29 0%,#302b63 50%,#24243e 100%);min-height:100vh;color:#fff;padding:20px}.container{max-width:500px;margin:0 auto}.ad-banner{background:rgba(255,255,255,.1);padding:20px;text-align:center;border-radius:12px;margin-bottom:20px;color:rgba(255,255,255,.5)}header{text-align:center;margin-bottom:30px}h1{font-size:1.8rem;margin-bottom:10px;background:linear-gradient(135deg,#f093fb,#f5576c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.subtitle{color:rgba(255,255,255,.6);font-size:.95rem}.input-section{background:rgba(255,255,255,.05);border-radius:16px;padding:25px;margin-bottom:20px}.input-group{margin-bottom:18px}label{display:block;margin-bottom:8px;color:rgba(255,255,255,.8);font-size:.9rem}input[type=text],input[type=date]{width:100%;padding:14px 16px;border:2px solid rgba(255,255,255,.1);border-radius:10px;background:rgba(255,255,255,.05);color:#fff;font-size:1rem;transition:all .3s}input:focus{outline:none;border-color:#f093fb;background:rgba(255,255,255,.1)}input[type=date]::-webkit-calendar-picker-indicator{filter:invert(1);cursor:pointer}.quick-dates{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}.quick-date{padding:8px 12px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:20px;color:rgba(255,255,255,.8);font-size:.8rem;cursor:pointer;transition:all .3s}.quick-date:hover{background:rgba(240,147,251,.2);border-color:#f093fb}.calculate-btn{width:100%;padding:16px;background:linear-gradient(135deg,#f093fb,#f5576c);border:none;border-radius:12px;color:#fff;font-size:1.1rem;font-weight:600;cursor:pointer;transition:transform .2s,box-shadow .2s}.calculate-btn:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(240,147,251,.3)}.result-section{display:none;margin-top:25px}.result-section.show{display:block;animation:fadeIn .5s ease}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.result-card{background:rgba(255,255,255,.05);border-radius:16px;padding:30px;text-align:center;margin-bottom:15px}.event-name{font-size:1.1rem;color:rgba(255,255,255,.7);margin-bottom:15px}.dday-value{font-size:4rem;font-weight:800;background:linear-gradient(135deg,#f093fb,#f5576c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1}.dday-label{font-size:1.2rem;color:rgba(255,255,255,.6);margin-top:10px}.target-date{font-size:.9rem;color:rgba(255,255,255,.5);margin-top:15px}.detail-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:20px}.detail-item{background:rgba(255,255,255,.05);border-radius:10px;padding:15px 10px}.detail-value{font-size:1.3rem;font-weight:700;color:#f093fb}.detail-label{font-size:.75rem;color:rgba(255,255,255,.5);margin-top:4px}.btn-group{display:flex;gap:10px;margin-top:20px}.save-btn,.share-btn{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:14px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:10px;color:#fff;font-size:.95rem;cursor:pointer;transition:all .3s}.save-btn:hover,.share-btn:hover{background:rgba(255,255,255,.15)}.saved-section{margin-top:30px}.saved-title{font-size:1rem;color:rgba(255,255,255,.6);margin-bottom:15px;display:flex;align-items:center;gap:8px}.saved-list{display:flex;flex-direction:column;gap:10px}.saved-item{display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,.05);border-radius:12px;padding:15px}.saved-info{flex:1}.saved-name{font-size:.95rem;color:#fff;margin-bottom:4px}.saved-date{font-size:.8rem;color:rgba(255,255,255,.5)}.saved-dday{font-size:1.2rem;font-weight:700;color:#f093fb;margin-right:15px}.delete-btn{background:0 0;border:none;color:rgba(255,255,255,.4);cursor:pointer;padding:5px;font-size:1.2rem}.delete-btn:hover{color:#f5576c}.empty-state{text-align:center;color:rgba(255,255,255,.4);font-size:.9rem;padding:20px}footer{text-align:center;margin-top:30px;color:rgba(255,255,255,.4);font-size:.8rem}.toast{position:fixed;bottom:30px;left:50%;transform:translateX(-50%) translateY(100px);background:rgba(0,0,0,.9);color:#fff;padding:12px 24px;border-radius:8px;font-size:.9rem;opacity:0;transition:all .3s;z-index:1000}.toast.show{transform:translateX(-50%) translateY(0);opacity:1}    </style>
<script>window.currentLang="en";window.toolI18n={"meta":{"title":{"ko":"D-day ê³„ì‚°ê¸°","en":"D-day Calculator","ja":"D-dayè¨ˆç®—æ©Ÿ"},"desc":{"ko":"ë‚ ì§œ ê³„ì‚°","en":"Date Calc","ja":"æ—¥ä»˜è¨ˆç®—"}},"header":{"title":{"ko":"ğŸ“… D-day ê³„ì‚°ê¸°","en":"ğŸ“… D-day Calculator","ja":"ğŸ“… D-dayè¨ˆç®—æ©Ÿ"},"subtitle":{"ko":"ë‚¨ì€ ì‹œê°„ í™•ì¸","en":"Check Time Left","ja":"æ®‹ã‚Šæ™‚é–“ç¢ºèª"}},"input":{"name":{"ko":"ì´ë²¤íŠ¸ ì´ë¦„","en":"Event Name","ja":"ã‚¤ãƒ™ãƒ³ãƒˆå"},"date":{"ko":"ë‚ ì§œ ì„ íƒ","en":"Select Date","ja":"æ—¥ä»˜é¸æŠ"},"btn":{"ko":"ê³„ì‚°í•˜ê¸°","en":"Calculate","ja":"è¨ˆç®—"}},"quick":{"suneung":{"ko":"ìˆ˜ëŠ¥","en":"SAT","ja":"ä¿®èƒ½"},"newyear":{"ko":"ìƒˆí•´","en":"New Year","ja":"æ–°å¹´"},"xmas":{"ko":"í¬ë¦¬ìŠ¤ë§ˆìŠ¤","en":"Christmas","ja":"ã‚¯ãƒªã‚¹ãƒã‚¹"}},"result":{"passed":{"ko":"ì¼ ì§€ë‚¨","en":"days passed","ja":"æ—¥çµŒé"},"left":{"ko":"ì¼ ë‚¨ìŒ","en":"days left","ja":"æ—¥æ®‹ã‚Š"},"today":{"ko":"ì˜¤ëŠ˜!","en":"Today!","ja":"ä»Šæ—¥ï¼"}},"detail":{"weeks":{"ko":"ì£¼","en":"Weeks","ja":"é€±"},"hours":{"ko":"ì‹œê°„","en":"Hours","ja":"æ™‚é–“"},"mins":{"ko":"ë¶„","en":"Mins","ja":"åˆ†"}},"btns":{"save":{"ko":"ì €ì¥","en":"Save","ja":"ä¿å­˜"},"share":{"ko":"ê³µìœ ","en":"Share","ja":"å…±æœ‰"}},"saved":{"title":{"ko":"ğŸ“Œ ì €ì¥ëœ D-day","en":"ğŸ“Œ Saved","ja":"ğŸ“Œ ä¿å­˜æ¸ˆã¿"},"empty":{"ko":"ì—†ìŒ","en":"Empty","ja":"ãªã—"}}};</script></head>
<body>
    <div class="container">
        <div class="ad-banner">Advertisement</div>

        <header>
            <h1>ğŸ“… D-day Calculator</h1>
            <p class="subtitle">Count down to your special day</p>
        </header>

        <div class="input-section">
            <div class="input-group">
                <label for="eventName">Event Name</label>
                <input type="text" id="eventName" placeholder="Event Name">
            </div>
            <div class="input-group">
                <label for="targetDate">Select Date</label>
                <input type="date" id="targetDate">
                <div class="quick-dates">
                    <span class="quick-date" onclick="setQuickDate('suneung')">2025 SAT</span>
                    <span class="quick-date" onclick="setQuickDate('newyear')">2026 New Year</span>
                    <span class="quick-date" onclick="setQuickDate('christmas')">Christmas</span>
                </div>
            </div>
            <button class="calculate-btn" onclick="calculateDday()">Calculate D-day</button>
        </div>

        <div class="result-section" id="result">
            <div class="result-card">
                <div class="event-name" id="resultEventName">-</div>
                <div class="dday-value" id="ddayValue">D-0</div>
                <div class="dday-label" id="ddayLabel">Today!</div>
                <div class="target-date" id="targetDateDisplay">-</div>
                <div class="detail-grid">
                    <div class="detail-item">
                        <div class="detail-value" id="weeksLeft">0</div>
                        <div class="detail-label">Weeks</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-value" id="hoursLeft">0</div>
                        <div class="detail-label">Hours</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-value" id="minutesLeft">0</div>
                        <div class="detail-label">Minutes</div>
                    </div>
                </div>
            </div>
            <div class="btn-group">
                <button class="save-btn" onclick="saveDday()">
                    <span>ğŸ’¾</span> <span>Save</span>
                </button>
                <button class="share-btn" onclick="shareDday()">
                    <span>ğŸ“¤</span> <span>Share</span>
                </button>
            </div>
        </div>

        <div class="saved-section">
            <div class="saved-title">
                <span>ğŸ“Œ</span> Saved D-days
            </div>
            <div class="saved-list" id="savedList">
                <div class="empty-state">No saved D-days</div>
            </div>
        </div>

        <div class="ad-banner" style="margin-top: 20px;">Advertisement</div>

        <footer>
            <p>Â© 2024 D-day Calculator</p>
        </footer>
    </div>

    <div class="toast" id="toast">Saved!</div>

    <script>
        let currentResult = null;

        function setQuickDate(type) {
            const now = new Date();
            let date;
            let name;

            switch(type) {
                case 'suneung': date = '2025-11-13'; name = 'SAT 2025'; break;
                case 'newyear': date = '2026-01-01'; name = 'New Year 2026'; break;
                case 'christmas':
                    const year = now.getMonth() === 11 && now.getDate() > 25 ? now.getFullYear() + 1 : now.getFullYear();
                    date = `${year}-12-25`;
                    name = 'Christmas';
                    break;
            }
            document.getElementById('targetDate').value = date;
            document.getElementById('eventName').value = name;
        }

        function calculateDday() {
            const targetDateInput = document.getElementById('targetDate').value;
            const eventName = document.getElementById('eventName').value || 'D-day';
            if (!targetDateInput) { alert('Please select a date'); return; }

            const target = new Date(targetDateInput + 'T00:00:00');
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const diffTime = target - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            let ddayText, labelText;
            if (diffDays > 0) {
                ddayText = `D-${diffDays}`;
                labelText = `${diffDays} days left`;
            } else if (diffDays === 0) {
                ddayText = 'D-Day';
                labelText = 'Today!';
            } else {
                ddayText = `D+${Math.abs(diffDays)}`;
                labelText = `${Math.abs(diffDays)} days passed`;
            }

            const weeks = Math.floor(Math.abs(diffDays) / 7);
            const totalHours = Math.abs(Math.floor(diffTime / (1000 * 60 * 60)));
            const hours = totalHours % 24;
            const totalMinutes = Math.abs(Math.floor(diffTime / (1000 * 60)));
            const minutes = totalMinutes % 60;
            const formattedDate = target.toLocaleDateString();

            document.getElementById('resultEventName').textContent = eventName;
            document.getElementById('ddayValue').textContent = ddayText;
            document.getElementById('ddayLabel').textContent = labelText;
            document.getElementById('targetDateDisplay').textContent = formattedDate;
            document.getElementById('weeksLeft').textContent = weeks.toLocaleString();
            document.getElementById('hoursLeft').textContent = hours.toLocaleString();
            document.getElementById('minutesLeft').textContent = minutes.toLocaleString();
            document.getElementById('result').classList.add('show');

            currentResult = { name: eventName, date: targetDateInput, dday: ddayText };
        }

        function saveDday() {
            if (!currentResult) return;
            let saved = JSON.parse(localStorage.getItem('ddays') || '[]');
            saved.push(currentResult);
            localStorage.setItem('ddays', JSON.stringify(saved));
            loadSavedDdays();
            showToast('Saved!');
        }

        function deleteDday(index) {
            let saved = JSON.parse(localStorage.getItem('ddays') || '[]');
            saved.splice(index, 1);
            localStorage.setItem('ddays', JSON.stringify(saved));
            loadSavedDdays();
        }

        function loadSavedDdays() {
            const saved = JSON.parse(localStorage.getItem('ddays') || '[]');
            const container = document.getElementById('savedList');
            const today = new Date(); today.setHours(0,0,0,0);

            if (saved.length === 0) {
                container.innerHTML = `<div class="empty-state">No saved D-days</div>`;
                return;
            }

            container.innerHTML = saved.map((item, index) => {
                const target = new Date(item.date + 'T00:00:00');
                const diffDays = Math.ceil((target - today) / (1000 * 60 * 60 * 24));
                let ddayText = diffDays > 0 ? `D-${diffDays}` : (diffDays === 0 ? 'D-Day' : `D+${Math.abs(diffDays)}`);
                return `<div class="saved-item"><div class="saved-info"><div class="saved-name">${item.name}</div><div class="saved-date">${item.date}</div></div><div class="saved-dday">${ddayText}</div><button class="delete-btn" onclick="deleteDday(${index})">Ã—</button></div>`;
            }).join('');
        }

        function shareDday() {
            if (!currentResult) return;
            const text = `${currentResult.name}\n${currentResult.dday}`;
            if (navigator.share) navigator.share({ title: 'D-day', text: text });
            else alert("Copied: " + text);
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        loadSavedDdays();
    </script>
<script src="/common/tool-i18n-handler.js"></script></body>
</html>
